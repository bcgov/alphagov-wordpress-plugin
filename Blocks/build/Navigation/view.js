document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".dswp-block-navigation-is-mobile-overlay, .dswp-block-navigation-is-always-overlay, .dswp-block-navigation-is-never-overlay").forEach((e=>{const n={mobileNavIcon:e.querySelector(".dswp-nav-mobile-toggle-icon"),menuContainer:e.querySelector(".dswp-block-navigation__container"),iconText:e.querySelector(".dswp-nav-mobile-menu-icon-text"),topBar:e.querySelector(".dswp-nav-mobile-menu-top-bar"),middleBar:e.querySelector(".dswp-nav-mobile-menu-middle-bar"),bottomBar:e.querySelector(".dswp-nav-mobile-menu-bottom-bar")},t=e.classList.contains("dswp-block-navigation-is-mobile-overlay");function o(){e.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{e.classList.remove("is-open");const n=e.querySelector(".wp-block-navigation__submenu-container"),t=e.querySelector(".dswp-submenu-toggle");n&&n.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false")}))}function s(){n.iconText&&(n.iconText.innerText="Menu"),n.topBar&&n.topBar.classList.remove("dswp-nav-mobile-menu-top-bar-open"),n.middleBar&&n.middleBar.classList.remove("dswp-nav-mobile-menu-middle-bar-open"),n.bottomBar&&n.bottomBar.classList.remove("dswp-nav-mobile-menu-bottom-bar-open"),n.mobileNavIcon.setAttribute("aria-expanded","false")}function i(e){e.querySelectorAll(".dswp-submenu-toggle").forEach((e=>{e.setAttribute("aria-expanded","false")}))}function a(){if(!t)return;const i=parseInt(e.dataset.dswpMobileBreakpoint),a=window.innerWidth<=(i||768);a!==n.menuContainer.classList.contains("dswp-is-mobile")&&(o(),a||(n.menuContainer.classList.remove("is-menu-open"),n.menuContainer.style.display="flex",s()),n.mobileNavIcon.style.display=a?"flex":"none",n.menuContainer.classList.toggle("dswp-is-mobile",a),a&&!n.menuContainer.classList.contains("is-menu-open")&&(n.menuContainer.style.display="none"))}function l(e){const n=e.querySelector(".wp-block-navigation__submenu-container");if(!n)return;const t=r(e);1===t?(n.style.left="0%",n.style.right="auto"):t>=2&&(n.style.left="100%",n.style.right="auto");const o=n.getBoundingClientRect(),s=window.innerWidth;1===t&&o.right>s?(n.style.left="auto",n.style.right="0%"):t>=2&&o.right>s&&(n.style.left="auto",n.style.right="100%")}function r(e){let n=1,t=e.parentElement;for(;t;)t.classList.contains("wp-block-navigation-submenu")&&n++,t=t.parentElement;return n}e.classList.contains("dswp-block-navigation-is-always-overlay")||e.classList.contains("dswp-block-navigation-is-mobile-only")?(n.mobileNavIcon.style.display="flex",n.menuContainer.style.display="none",n.menuContainer.classList.add("dswp-is-mobile")):t&&a(),t&&window.addEventListener("resize",a),n.mobileNavIcon&&n.mobileNavIcon.addEventListener("click",(function(){n.menuContainer.classList.toggle("is-menu-open");const e=n.menuContainer.classList.contains("is-menu-open");n.mobileNavIcon.setAttribute("aria-expanded",e.toString()),n.topBar.classList.toggle("dswp-nav-mobile-menu-top-bar-open"),n.middleBar.classList.toggle("dswp-nav-mobile-menu-middle-bar-open"),n.bottomBar&&n.bottomBar.classList.toggle("dswp-nav-mobile-menu-bottom-bar-open"),n.iconText.innerText=e?"Close menu":"Menu",n.menuContainer.style.display=e?"grid":"none",e||o()})),document.addEventListener("click",(function(t){const a=e.contains(t.target),l=window.innerWidth<=(parseInt(e.dataset.dswpMobileBreakpoint)||768);a||(l&&n.menuContainer.classList.contains("is-menu-open")?(n.menuContainer.classList.remove("is-menu-open"),n.menuContainer.style.display="none",s(),o()):l||(o(),i(e)))})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&(n.menuContainer.classList.contains("is-menu-open")&&(n.menuContainer.classList.remove("is-menu-open"),n.menuContainer.style.display="none",s()),o(),i(e))})),e.querySelectorAll(".wp-block-navigation-submenu > .wp-block-navigation-item__content").forEach((n=>{const t=n.closest(".wp-block-navigation-submenu"),o=t?.querySelector(".wp-block-navigation__submenu-container");if(o){const o=document.createElement("button");o.className="dswp-submenu-toggle",o.setAttribute("aria-expanded","false"),o.setAttribute("aria-label","Toggle submenu"),n.parentNode.insertBefore(o,n.nextSibling),o.addEventListener("click",(n=>{const s=t.querySelector(".wp-block-navigation__submenu-container"),i=t.classList.contains("is-open"),a=[];let c=t;for(;c;)c.classList.contains("wp-block-navigation-submenu")&&a.push(c),c=c.parentElement.closest(".wp-block-navigation-submenu");if(e.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{if(!a.includes(e)){e.classList.remove("is-open");const n=e.querySelector(".wp-block-navigation__submenu-container"),t=e.querySelector(".dswp-submenu-toggle");n&&n.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false")}})),t.classList.toggle("is-open"),s){s.classList.toggle("is-open"),r(t)>=2&&l(t);const e=new ResizeObserver((()=>{t.classList.contains("is-open")&&l(t)}));e.observe(t),e.observe(document.body);const n=()=>{t.classList.contains("is-open")||(e.disconnect(),t.removeEventListener("classChange",n))};t.addEventListener("classChange",n)}o.setAttribute("aria-expanded",(!i).toString())}))}}))}))}));
