(()=>{document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".dswp-block-navigation-is-mobile-overlay, .dswp-block-navigation-is-always-overlay, .dswp-block-navigation-is-never-overlay").forEach((n=>{const t={mobileNavIcon:n.querySelector(".dswp-nav-mobile-toggle-icon"),menuContainer:n.querySelector(".dswp-block-navigation__container"),iconText:n.querySelector(".dswp-nav-mobile-menu-icon-text"),topBar:n.querySelector(".dswp-nav-mobile-menu-top-bar"),middleBar:n.querySelector(".dswp-nav-mobile-menu-middle-bar"),bottomBar:n.querySelector(".dswp-nav-mobile-menu-bottom-bar")},o=n.classList.contains("dswp-block-navigation-is-mobile-overlay");function s(){n.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{e.classList.remove("is-open");const n=e.querySelector(".wp-block-navigation__submenu-container"),t=e.querySelector(".dswp-submenu-toggle");n&&n.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false")}))}function i(){t.iconText&&(t.iconText.innerText="Menu"),t.topBar&&t.topBar.classList.remove("dswp-nav-mobile-menu-top-bar-open"),t.middleBar&&t.middleBar.classList.remove("dswp-nav-mobile-menu-middle-bar-open"),t.bottomBar&&t.bottomBar.classList.remove("dswp-nav-mobile-menu-bottom-bar-open"),t.mobileNavIcon.setAttribute("aria-expanded","false")}function a(){n.querySelectorAll(".dswp-submenu-toggle").forEach((e=>{e.setAttribute("aria-expanded","false")}))}function l(){if(!o)return;const e=parseInt(n.dataset.dswpMobileBreakpoint),a=window.innerWidth<=(e||768);a!==t.menuContainer.classList.contains("dswp-is-mobile")&&(s(),a||(t.menuContainer.classList.remove("is-menu-open"),t.menuContainer.style.display="flex",i()),t.mobileNavIcon.style.display=a?"flex":"none",t.menuContainer.classList.toggle("dswp-is-mobile",a),a&&!t.menuContainer.classList.contains("is-menu-open")&&(t.menuContainer.style.display="none"))}function r(e){const n=e.querySelector(".wp-block-navigation__submenu-container");if(!n)return;const t=c(e);1===t?(n.style.left="0%",n.style.right="auto"):t>=2&&(n.style.left="100%",n.style.right="auto");const o=n.getBoundingClientRect(),s=window.innerWidth;1===t&&o.right>s?(n.style.left="auto",n.style.right="0%"):t>=2&&o.right>s&&(n.style.left="auto",n.style.right="100%")}function c(e){let n=1,t=e.parentElement;for(;t;)t.classList.contains("wp-block-navigation-submenu")&&n++,t=t.parentElement;return n}n.classList.contains("dswp-block-navigation-is-always-overlay")||n.classList.contains("dswp-block-navigation-is-mobile-only")?(t.mobileNavIcon.style.display="flex",t.menuContainer.style.display="none",t.menuContainer.classList.add("dswp-is-mobile")):o&&l(),o&&window.addEventListener("resize",l),t.mobileNavIcon&&t.mobileNavIcon.addEventListener("click",(function(){t.menuContainer.classList.toggle("is-menu-open");const e=t.menuContainer.classList.contains("is-menu-open");t.mobileNavIcon.setAttribute("aria-expanded",e.toString()),t.topBar.classList.toggle("dswp-nav-mobile-menu-top-bar-open"),t.middleBar.classList.toggle("dswp-nav-mobile-menu-middle-bar-open"),t.bottomBar&&t.bottomBar.classList.toggle("dswp-nav-mobile-menu-bottom-bar-open"),t.iconText.innerText=e?"Close menu":"Menu",t.menuContainer.style.display=e?"grid":"none",e||s()})),document.addEventListener("click",(function(e){const o=n.contains(e.target),l=window.innerWidth<=(parseInt(n.dataset.dswpMobileBreakpoint)||768);o||(l&&t.menuContainer.classList.contains("is-menu-open")?(t.menuContainer.classList.remove("is-menu-open"),t.menuContainer.style.display="none",i(),s()):l||(s(),a()))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(t.menuContainer.classList.contains("is-menu-open")&&(t.menuContainer.classList.remove("is-menu-open"),t.menuContainer.style.display="none",i()),s(),a())})),n.querySelectorAll(".wp-block-navigation-submenu > .wp-block-navigation-item__content").forEach((t=>{const o=t.closest(".wp-block-navigation-submenu"),s=o?.querySelector(".wp-block-navigation__submenu-container");if(s){!function(e){let n=e.parentElement;for(;n;)n.classList.contains("wp-block-navigation-submenu")&&0,n=n.parentElement}(o);const s=document.createElement("button");s.className="dswp-submenu-toggle",s.setAttribute("aria-expanded","false"),s.setAttribute("aria-label","Toggle submenu"),t.parentNode.insertBefore(s,t.nextSibling),s.addEventListener("click",(()=>{const t=o.querySelector(".wp-block-navigation__submenu-container"),i=o.classList.contains("is-open"),a=[];let l=o;for(;l;)l.classList.contains("wp-block-navigation-submenu")&&a.push(l),l=l.parentElement.closest(".wp-block-navigation-submenu");if(n.querySelectorAll(".wp-block-navigation-submenu.is-open").forEach((e=>{if(!a.includes(e)){e.classList.remove("is-open");const n=e.querySelector(".wp-block-navigation__submenu-container"),t=e.querySelector(".dswp-submenu-toggle");n&&n.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false")}})),o.classList.toggle("is-open"),t){t.classList.toggle("is-open"),c(o)>=2&&r(o);const n=e(o,(()=>{o.classList.contains("is-open")&&r(o)}));n.observe(document.body);const s=()=>{o.classList.contains("is-open")||(n.disconnect(),o.removeEventListener("classChange",s))};o.addEventListener("classChange",s)}s.setAttribute("aria-expanded",(!i).toString())}))}}))}))}));const e=(e,n)=>{if("undefined"!=typeof window&&"ResizeObserver"in window)return new window.ResizeObserver(n);const t=()=>{e.classList.contains("is-open")&&n()};return window.addEventListener("resize",t),{observe:()=>{},disconnect:()=>window.removeEventListener("resize",t)}}})();