(()=>{"use strict";var e,t={710:()=>{const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.blockEditor,s=window.wp.components,a=window.wp.element,r=window.wp.data,o=window.wp.coreData,i=window.ReactJSXRuntime;function l(){return(0,i.jsxs)("button",{className:"dswp-nav-mobile-toggle-icon","aria-label":"Toggle menu","aria-expanded":"false",children:[(0,i.jsx)("span",{className:"dswp-nav-mobile-menu-icon-text",children:"Menu"}),(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-top-bar",d:"M3,6h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-middle-bar",d:"M3,12h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-bottom-bar",d:"M3,18h13",strokeWidth:"1",stroke:"currentColor"})]})]})}const c=JSON.parse('{"UU":"custom/navigation"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:c,setAttributes:u,clientId:d}){const{menuId:p,overlayMenu:v,mobileBreakpoint:b=768}=c,{replaceInnerBlocks:m}=(0,r.useDispatch)(n.store),{editEntityRecord:h,saveEditedEntityRecord:w}=(0,r.useDispatch)(o.store),g=(0,r.useRegistry)(),k=(0,n.useBlockProps)({className:`dswp-block-navigation-is-${v}-overlay`,"data-dswp-mobile-breakpoint":b}),{menus:y,hasResolvedMenus:_,selectedMenu:x,currentBlocks:f,isCurrentPostSaving:j}=(0,r.useSelect)((e=>{const{getEntityRecords:t,hasFinishedResolution:s,getEditedEntityRecord:a}=e(o.store),r={per_page:-1,status:["publish","draft"]};return{menus:t("postType","wp_navigation",r),hasResolvedMenus:s("getEntityRecords",["postType","wp_navigation",r]),selectedMenu:p?a("postType","wp_navigation",p):null,currentBlocks:e(n.store).getBlocks(d),isCurrentPostSaving:e("core/editor")?.isSavingPost()}}),[p,d]),B=(0,a.useRef)(null),N=(0,a.useRef)(!0),M=(0,a.useRef)(null),C=(0,a.useCallback)((t=>t.map((t=>{const n={...t.attributes,label:t.attributes.label,url:t.attributes.url,type:t.attributes.type,id:t.attributes.id,kind:t.attributes.kind,opensInNewTab:t.attributes.opensInNewTab||!1};return"core/navigation-link"===t.name?(0,e.createBlock)("core/navigation-link",n):"core/navigation-submenu"===t.name?(0,e.createBlock)("core/navigation-submenu",n,t.innerBlocks?C(t.innerBlocks):[]):null})).filter(Boolean)),[]);(0,a.useEffect)((()=>{if(x?.content&&N.current){const t=(0,e.parse)(x.content);M.current=(0,e.serialize)(t),B.current=M.current,g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent()}}),[x]),(0,a.useEffect)((()=>{!N.current&&f&&(0,e.serialize)(f)===M.current&&g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent()}),[f]),(0,a.useEffect)((()=>{if(!j||!p||!f)return;const t=(0,e.serialize)(f);t===B.current||N.current&&t===M.current||(B.current=t,(async()=>{try{await h("postType","wp_navigation",p,{content:t,status:"publish"}),await w("postType","wp_navigation",p)}catch(e){console.error("Failed to update navigation menu:",e)}})())}),[j,p,f]),(0,a.useEffect)((()=>{if(!x||!x.content)return g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent(),m(d,[]),B.current=(0,e.serialize)([]),void(N.current=!1);const t=(0,e.parse)(x.content),s=C(t);g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent(),m(d,s),N.current&&(B.current=(0,e.serialize)(s),M.current=B.current,N.current=!1,g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent())}),[x]);const R=(0,a.useMemo)((()=>[{label:(0,t.__)("Select a menu"),value:0},...(y||[]).map((e=>({label:e.title.rendered||(0,t.__)("(no title)"),value:e.id})))]),[y]),P=(0,n.useInnerBlocksProps)({className:"dswp-block-navigation__container"},{allowedBlocks:["core/navigation-link","core/navigation-submenu"],orientation:"horizontal",templateLock:!1});return _?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.InspectorControls,{children:(0,i.jsxs)(s.PanelBody,{title:(0,t.__)("Navigation Settings"),children:[(0,i.jsx)(s.SelectControl,{label:(0,t.__)("Select Menu"),value:p||0,options:R,onChange:e=>{const t=parseInt(e);u({menuId:t})}}),(0,i.jsxs)(s.ButtonGroup,{children:[(0,i.jsx)("span",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px"},children:(0,t.__)("Overlay Menu")}),(0,i.jsx)(s.Button,{variant:"mobile"===v?"primary":"secondary",onClick:()=>u({overlayMenu:"mobile"}),children:(0,t.__)("Mobile")}),(0,i.jsx)(s.Button,{variant:"always"===v?"primary":"secondary",onClick:()=>u({overlayMenu:"always"}),children:(0,t.__)("Always")}),(0,i.jsx)(s.Button,{variant:"never"===v?"primary":"secondary",onClick:()=>u({overlayMenu:"never"}),children:(0,t.__)("Never")})]}),"mobile"===v&&(0,i.jsx)("div",{style:{marginTop:"1rem"},children:(0,i.jsx)(s.RangeControl,{label:(0,t.__)("Mobile Breakpoint (px)","your-text-domain"),value:b,onChange:e=>u({mobileBreakpoint:e}),min:320,max:1200,step:1})})]})}),(0,i.jsx)("nav",{...k,children:"always"===v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{}),(0,i.jsx)("div",{...P,style:{display:"none"}})]}):(0,i.jsx)("div",{...P})})]}):(0,i.jsx)(s.Spinner,{})},save:function({attributes:e}){const{overlayMenu:t,mobileBreakpoint:s}=e,a=n.useBlockProps.save({className:`dswp-block-navigation-is-${t}-overlay`,"data-dswp-mobile-breakpoint":s}),r=n.useInnerBlocksProps.save({className:"dswp-block-navigation__container"});return(0,i.jsxs)("nav",{...a,children:[(0,i.jsx)(l,{}),(0,i.jsx)("div",{...r})]})}})}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,n,a,r)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,a,r]=e[u],i=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={160:0,256:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[o,i,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(l)var u=l(s)}for(t&&t(n);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},n=globalThis.webpackChunkmega_menu_nav=globalThis.webpackChunkmega_menu_nav||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=s.O(void 0,[256],(()=>s(710)));a=s.O(a)})();
