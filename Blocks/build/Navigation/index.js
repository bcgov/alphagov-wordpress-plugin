(()=>{"use strict";var e,t={710:()=>{const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.blockEditor,s=window.wp.components,r=window.wp.element,a=window.wp.data,o=window.wp.coreData,i=window.ReactJSXRuntime;function l(){return(0,i.jsxs)("button",{className:"dswp-nav-mobile-toggle-icon","aria-label":"Toggle menu","aria-expanded":"false",children:[(0,i.jsx)("span",{className:"dswp-nav-mobile-menu-icon-text",children:"Menu"}),(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-top-bar",d:"M3,6h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-middle-bar",d:"M3,12h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-bottom-bar",d:"M3,18h13",strokeWidth:"1",stroke:"currentColor"})]})]})}const c=JSON.parse('{"UU":"custom/navigation"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:c,setAttributes:u,clientId:d}){const{menuId:p,overlayMenu:b,isMobile:v,mobileBreakpoint:m=768}=c,{replaceInnerBlocks:h}=(0,a.useDispatch)(n.store),{editEntityRecord:w,saveEditedEntityRecord:k}=(0,a.useDispatch)(o.store),g=(0,a.useRegistry)(),y=(0,n.useBlockProps)({className:`dswp-block-navigation-is-${b}-overlay`,style:{"--mobile-breakpoint":m}}),{menus:_,hasResolvedMenus:x}=(0,a.useSelect)((e=>{const{getEntityRecords:t,hasFinishedResolution:n}=e(o.store),s={per_page:-1,status:["publish","draft"]};return{menus:t("postType","wp_navigation",s),hasResolvedMenus:n("getEntityRecords",["postType","wp_navigation",s])}}),[]),{selectedMenu:f}=(0,a.useSelect)((e=>{if(!p)return{selectedMenu:null};const{getEditedEntityRecord:t}=e(o.store);return{selectedMenu:t("postType","wp_navigation",p)}}),[p]),{currentBlocks:M}=(0,a.useSelect)((e=>({currentBlocks:e(n.store).getBlocks(d)})),[d]),j=(0,r.useRef)(null),N=(0,r.useRef)(!0),B=(0,r.useRef)(null),{isCurrentPostSaving:C}=(0,a.useSelect)((e=>({isCurrentPostSaving:e("core/editor")?.isSavingPost()})),[]);(0,r.useEffect)((()=>{if(f&&f.content&&N.current){const t=(0,e.parse)(f.content);B.current=(0,e.serialize)(t),j.current=B.current,g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent()}}),[f]),(0,r.useEffect)((()=>{!N.current&&M&&(0,e.serialize)(M)===B.current&&g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent()}),[M]),(0,r.useEffect)((()=>{C&&p&&M&&(async()=>{try{const t=(0,e.serialize)(M);if(t===j.current||N.current&&t===B.current)return;j.current=t,await w("postType","wp_navigation",p,{content:t,status:"publish"}),await k("postType","wp_navigation",p)}catch(e){console.error("Failed to update navigation menu:",e)}})()}),[C]),(0,r.useEffect)((()=>{if(!f||!f.content)return g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent(),h(d,[]),j.current=(0,e.serialize)([]),void(N.current=!1);const t=(0,e.parse)(f.content),s=t=>t.map((t=>"core/navigation-link"===t.name?(0,e.createBlock)("core/navigation-link",{...t.attributes,label:t.attributes.label,url:t.attributes.url,type:t.attributes.type,id:t.attributes.id,kind:t.attributes.kind,opensInNewTab:t.attributes.opensInNewTab||!1}):"core/navigation-submenu"===t.name?(0,e.createBlock)("core/navigation-submenu",{...t.attributes,label:t.attributes.label,url:t.attributes.url,type:t.attributes.type,id:t.attributes.id,kind:t.attributes.kind,opensInNewTab:t.attributes.opensInNewTab||!1},t.innerBlocks?s(t.innerBlocks):[]):null)).filter(Boolean),r=s(t);g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent(),h(d,r),N.current&&(j.current=(0,e.serialize)(r),B.current=j.current,N.current=!1,g.dispatch(n.store).__unstableMarkNextChangeAsNotPersistent())}),[f]);const R=(0,n.useInnerBlocksProps)({className:"dswp-block-navigation__container"},{allowedBlocks:["core/navigation-link","core/navigation-submenu"],orientation:"horizontal",templateLock:!1});if(!x)return(0,i.jsx)(s.Spinner,{});const S=[{label:(0,t.__)("Select a menu"),value:0},...(_||[]).map((e=>({label:e.title.rendered||(0,t.__)("(no title)"),value:e.id})))];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.InspectorControls,{children:(0,i.jsxs)(s.PanelBody,{title:(0,t.__)("Navigation Settings"),children:[(0,i.jsx)(s.SelectControl,{label:(0,t.__)("Select Menu"),value:p||0,options:S,onChange:e=>{const t=parseInt(e);u({menuId:t})}}),(0,i.jsxs)(s.ButtonGroup,{children:[(0,i.jsx)(s.Button,{variant:"mobile"===b?"primary":"secondary",onClick:()=>u({overlayMenu:"mobile",isMobile:"inMobileMode"}),children:(0,t.__)("Mobile")}),(0,i.jsx)(s.Button,{variant:"always"===b?"primary":"secondary",onClick:()=>u({overlayMenu:"always",isMobile:"always"}),children:(0,t.__)("Always")}),(0,i.jsx)(s.Button,{variant:"never"===b?"primary":"secondary",onClick:()=>u({overlayMenu:"never",isMobile:"never"}),children:(0,t.__)("Never")})]}),"mobile"===b&&(0,i.jsx)(s.RangeControl,{label:(0,t.__)("Mobile Breakpoint (px)","your-text-domain"),value:m,onChange:e=>u({mobileBreakpoint:e}),min:320,max:1200,step:1})]})}),(0,i.jsx)("nav",{...y,children:"always"===b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{}),(0,i.jsx)("div",{...R,style:{display:"none"}})]}):(0,i.jsx)("div",{...R})})]})},save:function({attributes:e}){const{overlayMenu:t,mobileIconStyle:s,mobileBreakpoint:r=768}=e,a=n.useBlockProps.save({className:`dswp-block-navigation-is-${t}-overlay`,style:{"--mobile-breakpoint":r}}),o=n.useInnerBlocksProps.save({className:"dswp-block-navigation__container"});return(0,i.jsxs)("nav",{...a,children:[(0,i.jsx)(l,{}),(0,i.jsx)("div",{...o})]})}})}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={160:0,256:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,o=n[0],i=n[1],l=n[2],c=0;if(o.some((t=>0!==e[t]))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var u=l(s)}for(t&&t(n);c<o.length;c++)a=o[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=self.webpackChunkmega_menu_nav=self.webpackChunkmega_menu_nav||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=s.O(void 0,[256],(()=>s(710)));r=s.O(r)})();