(()=>{"use strict";var e,t={710:()=>{const e=window.wp.blocks,t=window.wp.components,n=window.wp.i18n,s=window.wp.element,r=window.wp.data,a=window.wp.blockEditor,o=window.wp.coreData,i=window.ReactJSXRuntime;function l(){return(0,i.jsxs)("button",{className:"dswp-nav-mobile-toggle-icon","aria-label":"Toggle menu","aria-expanded":"false",children:[(0,i.jsx)("span",{className:"dswp-nav-mobile-menu-icon-text",children:"Menu"}),(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-top-bar",d:"M3,6h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-middle-bar",d:"M3,12h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-bottom-bar",d:"M3,18h13",strokeWidth:"1",stroke:"currentColor"})]})]})}const c=["core/navigation-link","core/navigation-submenu","core/spacer"],u=JSON.parse('{"UU":"design-system-wordpress-plugin/navigation"}');(0,e.registerBlockType)(u.UU,{edit:function({attributes:u,setAttributes:p,clientId:d}){const{menuId:b,overlayMenu:v,mobileBreakpoint:m=768}=u,{replaceInnerBlocks:w}=(0,r.useDispatch)(a.store),{editEntityRecord:h,saveEditedEntityRecord:g}=(0,r.useDispatch)(o.store),k=(0,r.useRegistry)(),_=(0,a.useBlockProps)({className:`dswp-block-navigation-is-${v}-overlay`,"data-dswp-mobile-breakpoint":m}),{menus:y,hasResolvedMenus:x,selectedMenu:f,currentBlocks:j,isCurrentPostSaving:B}=(0,r.useSelect)((e=>{const{getEntityRecords:t,hasFinishedResolution:n,getEditedEntityRecord:s}=e(o.store),r={per_page:-1,status:["publish","draft"]};return{menus:t("postType","wp_navigation",r),hasResolvedMenus:n("getEntityRecords",["postType","wp_navigation",r]),selectedMenu:b?s("postType","wp_navigation",b):null,currentBlocks:e(a.store).getBlocks(d),isCurrentPostSaving:e("core/editor")?.isSavingPost()}}),[b,d]),N=(0,s.useRef)(null),M=(0,s.useRef)(!0),C=(0,s.useRef)(null),R=(0,s.useCallback)((t=>t.map((t=>{const n={...t.attributes,label:t.attributes.label,url:t.attributes.url,type:t.attributes.type,id:t.attributes.id,kind:t.attributes.kind,opensInNewTab:t.attributes.opensInNewTab||!1};return"core/navigation-link"===t.name?(0,e.createBlock)("core/navigation-link",n):"core/navigation-submenu"===t.name?(0,e.createBlock)("core/navigation-submenu",n,t.innerBlocks?R(t.innerBlocks):[]):null})).filter(Boolean)),[]);(0,s.useEffect)((()=>{if(f?.content&&M.current){const t=(0,e.parse)(f.content);C.current=(0,e.serialize)(t),N.current=C.current,k.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent()}}),[f,k]),(0,s.useEffect)((()=>{!M.current&&j&&(0,e.serialize)(j)===C.current&&k.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent()}),[j,k]),(0,s.useEffect)((()=>{if(!B||!b||!j)return;const t=(0,e.serialize)(j);t===N.current||M.current&&t===C.current||(N.current=t,(async()=>{try{await h("postType","wp_navigation",b,{content:t,status:"publish"}),await g("postType","wp_navigation",b)}catch(e){throw new Error("Failed to update navigation menu:",e)}})())}),[B,b,j,h,g]),(0,s.useEffect)((()=>{if(!f||!f.content)return k.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent(),w(d,[]),N.current=(0,e.serialize)([]),void(M.current=!1);const t=(0,e.parse)(f.content),n=R(t);k.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent(),w(d,n),M.current&&(N.current=(0,e.serialize)(n),C.current=N.current,M.current=!1,k.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent())}),[f,k,d,R,w]);const E=(0,s.useMemo)((()=>y?.length?[{label:(0,n.__)("Select a menu","dswp"),value:0},...y.map((e=>({label:e.title.rendered||(0,n.__)("(no title)","dswp"),value:e.id})))]:[{label:(0,n.__)("Select a menu","dswp"),value:0}]),[y]),P=(0,a.useInnerBlocksProps)({className:"dswp-block-navigation__container"},{allowedBlocks:c,orientation:"horizontal",templateLock:!1});return x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.InspectorControls,{children:(0,i.jsxs)(t.PanelBody,{title:(0,n.__)("Navigation Settings","dswp"),children:[(0,i.jsx)(t.SelectControl,{label:(0,n.__)("Select Menu","dswp"),value:b||0,options:E,onChange:e=>{const t=parseInt(e);p({menuId:t})}}),(0,i.jsxs)(t.ButtonGroup,{children:[(0,i.jsx)("span",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px"},children:(0,n.__)("Overlay Menu","dswp")}),(0,i.jsx)(t.Button,{variant:"mobile"===v?"primary":"secondary",onClick:()=>p({overlayMenu:"mobile"}),children:(0,n.__)("Mobile","dswp")}),(0,i.jsx)(t.Button,{variant:"always"===v?"primary":"secondary",onClick:()=>p({overlayMenu:"always"}),children:(0,n.__)("Always","dswp")}),(0,i.jsx)(t.Button,{variant:"never"===v?"primary":"secondary",onClick:()=>p({overlayMenu:"never"}),children:(0,n.__)("Never","dswp")})]}),"mobile"===v&&(0,i.jsx)("div",{style:{marginTop:"1rem"},children:(0,i.jsx)(t.RangeControl,{label:(0,n.__)("Mobile Breakpoint (px)","dswp"),value:m,onChange:e=>p({mobileBreakpoint:e}),min:320,max:1200,step:1})})]})}),(0,i.jsxs)("nav",{..._,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...P})]})]}):(0,i.jsx)(t.Spinner,{})},save:function({attributes:e}){const{overlayMenu:t,mobileBreakpoint:n}=e,s=a.useBlockProps.save({className:`dswp-block-navigation-is-${t}-overlay`,"data-dswp-mobile-breakpoint":n}),r=a.useInnerBlocksProps.save({className:"dswp-block-navigation__container"});return(0,i.jsxs)("nav",{...s,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...r})]})}})}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,r,a]=e[u],i=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={160:0,256:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,i,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var u=l(s)}for(t&&t(n);c<o.length;c++)a=o[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=globalThis.webpackChunkdesign_system_navigation_block=globalThis.webpackChunkdesign_system_navigation_block||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=s.O(void 0,[256],(()=>s(710)));r=s.O(r)})();