{"version":3,"file":"Navigation/view.js","mappings":"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","sources":["webpack://mega-menu-nav/./src/Navigation/view.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n    const navBlocks = document.querySelectorAll('.dswp-block-navigation-is-mobile-overlay, .dswp-block-navigation-is-always-overlay');\n    \n    navBlocks.forEach(nav => {\n        const mobileNavIcon = nav.querySelector(\".dswp-nav-mobile-toggle-icon\");\n        const menuContainer = nav.querySelector(\".dswp-block-navigation__container\");\n        const isMobileMode = nav.classList.contains('dswp-block-navigation-is-mobile-overlay');\n        const isAlwaysMode = nav.classList.contains('dswp-block-navigation-is-always-overlay');\n        \n        function handleResize() {\n            if (!isMobileMode) return;\n            \n            const breakpoint = parseInt(getComputedStyle(nav).getPropertyValue('--mobile-breakpoint'));\n            const isMobileView = window.innerWidth <= (breakpoint || 768);\n            \n            if (isMobileView) {\n                mobileNavIcon.style.display = 'flex';\n                if (!menuContainer.classList.contains('is-menu-open')) {\n                    menuContainer.style.display = 'none';\n                }\n            } else {\n                mobileNavIcon.style.display = 'none';\n                menuContainer.style.display = 'flex';\n                menuContainer.classList.remove('is-menu-open');\n                resetMenuState();\n            }\n        }\n\n        function resetMenuState() {\n            const mobileNavIconText = nav.querySelector(\".dswp-nav-mobile-menu-icon-text\");\n            const mobileNavTopBar = nav.querySelector(\".dswp-nav-mobile-menu-top-bar\");\n            const mobileNavMiddleBar = nav.querySelector(\".dswp-nav-mobile-menu-middle-bar\");\n            const mobileNavBottomBar = nav.querySelector(\".dswp-nav-mobile-menu-bottom-bar\");\n\n            if (mobileNavIconText) mobileNavIconText.innerText = \"Menu\";\n            if (mobileNavTopBar) mobileNavTopBar.classList.remove(\"dswp-nav-mobile-menu-top-bar-open\");\n            if (mobileNavMiddleBar) mobileNavMiddleBar.classList.remove(\"dswp-nav-mobile-menu-middle-bar-open\");\n            if (mobileNavBottomBar) mobileNavBottomBar.classList.remove(\"dswp-nav-mobile-menu-bottom-bar-open\");\n            \n            mobileNavIcon.setAttribute('aria-expanded', 'false');\n        }\n\n        // Set initial states\n        if (isAlwaysMode) {\n            mobileNavIcon.style.display = 'flex';\n            menuContainer.style.display = 'none';\n        } else if (isMobileMode) {\n            handleResize();\n        }\n\n        // Listen for window resize only in mobile mode\n        if (isMobileMode) {\n            window.addEventListener('resize', handleResize);\n        }\n\n        // Mobile menu toggle functionality\n        if (mobileNavIcon) {\n            mobileNavIcon.addEventListener(\"click\", function () {\n                const mobileNavIconText = nav.querySelector(\".dswp-nav-mobile-menu-icon-text\");\n                const mobileNavTopBar = nav.querySelector(\".dswp-nav-mobile-menu-top-bar\");\n                const mobileNavMiddleBar = nav.querySelector(\".dswp-nav-mobile-menu-middle-bar\");\n                const mobileNavBottomBar = nav.querySelector(\".dswp-nav-mobile-menu-bottom-bar\");\n\n                // Toggle menu visibility\n                menuContainer.classList.toggle('is-menu-open');\n                const isOpen = menuContainer.classList.contains('is-menu-open');\n                \n                // Update ARIA state\n                mobileNavIcon.setAttribute('aria-expanded', isOpen.toString());\n                \n                // Toggle hamburger animation\n                mobileNavTopBar.classList.toggle(\"dswp-nav-mobile-menu-top-bar-open\");\n                mobileNavMiddleBar.classList.toggle(\"dswp-nav-mobile-menu-middle-bar-open\");\n                if (mobileNavBottomBar) {\n                    mobileNavBottomBar.classList.toggle(\"dswp-nav-mobile-menu-bottom-bar-open\");\n                }\n\n                // Update menu text\n                mobileNavIconText.innerText = isOpen ? \"Close menu\" : \"Menu\";\n                \n                // Show/hide menu\n                menuContainer.style.display = isOpen ? 'grid' : 'none';\n            });\n        }\n\n        // Close menu when clicking outside\n        document.addEventListener('click', function(event) {\n            if (isMobileMode || isAlwaysMode) {\n                const isClickInside = nav.contains(event.target);\n                \n                if (!isClickInside && menuContainer.classList.contains('is-menu-open')) {\n                    menuContainer.classList.remove('is-menu-open');\n                    menuContainer.style.display = 'none';\n                    resetMenuState();\n                }\n            }\n        });\n\n        // Handle escape key\n        document.addEventListener('keydown', function(event) {\n            if (event.key === 'Escape' && menuContainer.classList.contains('is-menu-open')) {\n                menuContainer.classList.remove('is-menu-open');\n                menuContainer.style.display = 'none';\n                resetMenuState();\n            }\n        });\n\n        // Clean up event listeners on page unload\n        window.addEventListener('unload', function() {\n            if (isMobileMode) {\n                window.removeEventListener('resize', handleResize);\n            }\n        });\n\n        // Add submenu click handlers\n        const submenuLinks = nav.querySelectorAll('.wp-block-navigation-item__content');\n        \n        submenuLinks.forEach(link => {\n            link.addEventListener('click', e => {\n                const clickedElement = e.target;\n                const arrowArea = link.querySelector('::after');\n                const beforeElement = link.querySelector('::before');\n                \n                // Check if click is in the arrow area (right side)\n                const rect = link.getBoundingClientRect();\n                const isArrowClick = (e.clientX - rect.left) > (rect.width - 56);\n                \n                const submenu = link.closest('.wp-block-navigation-submenu');\n                const submenuContainer = submenu.querySelector('.wp-block-navigation__submenu-container');\n                const linkHref = link.getAttribute('href');\n\n                // If it's not an arrow click and there's a valid href, let the link work\n                if (!isArrowClick && linkHref && linkHref !== '#') {\n                    return; // Allow default link behavior\n                }\n\n                // Prevent default only for arrow clicks or links without href\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (submenuContainer) {\n                    // First, make the submenu visible but hidden to measure it\n                    submenuContainer.style.visibility = 'hidden';\n                    submenuContainer.style.display = 'block';\n                    \n                    // Get measurements\n                    const submenuRect = submenuContainer.getBoundingClientRect();\n                    const parentRect = submenu.getBoundingClientRect();\n                    const viewportWidth = window.innerWidth;\n                    \n                    // Reset visibility\n                    submenuContainer.style.visibility = '';\n                    submenuContainer.style.display = '';\n\n                    // Remove existing position classes\n                    submenuContainer.classList.remove('submenu-align-left', 'submenu-align-right');\n                    \n                    // For nested submenus (not top level)\n                    if (submenu.closest('.wp-block-navigation__submenu-container')) {\n                        // Check if submenu would overflow on the right\n                        if (parentRect.right + submenuRect.width > viewportWidth) {\n                            submenuContainer.classList.add('submenu-align-right');\n                        } else {\n                            submenuContainer.classList.add('submenu-align-left');\n                        }\n                    }\n                }\n\n                // Toggle the current submenu\n                submenu.classList.toggle('is-open');\n                if (submenuContainer) {\n                    submenuContainer.classList.toggle('is-open');\n                }\n\n                // Close other submenus at the same level\n                const siblings = submenu.parentElement.children;\n                Array.from(siblings).forEach(sibling => {\n                    if (sibling !== submenu && sibling.classList.contains('wp-block-navigation-submenu')) {\n                        sibling.classList.remove('is-open');\n                        const siblingSubmenuContainer = sibling.querySelector('.wp-block-navigation__submenu-container');\n                        if (siblingSubmenuContainer) {\n                            siblingSubmenuContainer.classList.remove('is-open');\n                        }\n                    }\n                });\n\n                // Close all nested submenus inside the current submenu if it is being closed\n                if (!submenu.classList.contains('is-open')) {\n                    const nestedSubmenus = submenu.querySelectorAll('.wp-block-navigation-submenu');\n                    nestedSubmenus.forEach(nestedSubmenu => {\n                        nestedSubmenu.classList.remove('is-open');\n                        const nestedContainer = nestedSubmenu.querySelector('.wp-block-navigation__submenu-container');\n                        if (nestedContainer) {\n                            nestedContainer.classList.remove('is-open');\n                        }\n                    });\n                }\n            });\n        });\n    });\n});"],"names":["document","addEventListener","navBlocks","querySelectorAll","forEach","nav","mobileNavIcon","querySelector","menuContainer","isMobileMode","classList","contains","isAlwaysMode","handleResize","breakpoint","parseInt","getComputedStyle","getPropertyValue","isMobileView","window","innerWidth","style","display","remove","resetMenuState","mobileNavIconText","mobileNavTopBar","mobileNavMiddleBar","mobileNavBottomBar","innerText","setAttribute","toggle","isOpen","toString","event","isClickInside","target","key","removeEventListener","submenuLinks","link","e","clickedElement","arrowArea","beforeElement","rect","getBoundingClientRect","isArrowClick","clientX","left","width","submenu","closest","submenuContainer","linkHref","getAttribute","preventDefault","stopPropagation","visibility","submenuRect","parentRect","viewportWidth","right","add","siblings","parentElement","children","Array","from","sibling","siblingSubmenuContainer","nestedSubmenus","nestedSubmenu","nestedContainer"],"sourceRoot":""}